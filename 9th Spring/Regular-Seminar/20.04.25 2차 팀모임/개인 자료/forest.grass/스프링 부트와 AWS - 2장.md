# 2.스프링 부트에서 테스트 코드를 작성하자
## 진도 기록

|공부 날짜|공부한 페이지 수|
|---|---|
|2020.04.22|51p ~ 78p|

## 개요
- 견고한 서비스를 만들고 싶은 개발자나 팀에서 TDD를 하거나 최소한 테스트 코드는 꼭 작성하자.
- 대부분의 서비스 회사가 테스트 코드에 관해 요구하고 있다.

## 2.1 테스트 코드 소개
- TDD와 단위 테스트는 다른 이야기다.
- TDD
  - 테스트가 주도하는 개발을 이야기합니다.
  - 테스트 코드를 먼저 작성하는 것부터 시작합니다.
  - 레드, 그린, 리팩토링 사이클
- 단위 테스트
  - TDD의 첫 번째 단계인 기능 단위의 테스트 코드를 작성하는 것을 이야기합니다.
  - TDD와 달리 테스트크 도르르 꼭 먼저 작성해야 하는것도 아니고, 리팩토링도 포함되지 않습니다.
  - 순순하게 테스트 코드만 작성하는 것을 이야기합니다.
- 단위 테스트 코드를 작성함으로써 얻는 이점
  - 단위 테스트는 개발단계 초기에 문제를 발견하게 도와줍니다.
  - 단위 테스트는 개발자가 나중에 코드를 리팩토링하거나 라이브러리 업그레이드 등에서 기존 기능이 올바르게 작동하는지 확인할 수 있습니다.
  - 단위 테스트트 기능에 대한 불확실성을 감소시킬 수 있습니다.
  - 단위 테스트는 시스템에 대한 실제 문서를 제공합니다. 즉, 단위 테스트 자체가 문서로 사용할 수 있습니다.
- 저자가 생각하는 이점
  - 빠른 피드백
  - 매번 코드를 수정할 때마다 불필요한 반복 작업이 필요 없다.
  - 자동 검증
    - 개발자가 만든 기능을 안전하게 보호
    - 새로운 기능이 추가 될 때, 기존 기능이 잘 작동되는 것을 보장
- 테스트 코드는 기술이자 습관입니다.
- xUnit 프레임워크
  - JUnit - java
  - DBUnit - DB
  - CppUnit - C++
  - NUnit - .net
  
## 2.2 Hello Controller 테스트 코드 작성하기
- 패키지명은 웹 사이트 주소의 역순으로 합니다.
- @SpringBootApplication
  - 스프링 부투의 자동 설정, 스프링 Bean 읽기와 생성 모두 자동으로 설정합니다.
  - @SpringBootApplication이 있는 위치부터 설정을 읽어가기 때문에 이 클래스는 항상 프로젝트의 최상단에 위치해야만 합니다.
- 내장 WAS
  - 톰캣 설치 x
  - 스프링 부트로 만들어진 Jar 파일로만 실행
  - 스프링 부트에서는 내장 WAS를 사용하는 것을 권장
  - 외장 WAS를 쓴다고 하면 모든 서버는 WAS의 종류와 버전, 설정을 일치시켜야만 합니다.
- @RunWith(SpringRunner.class)
  - 테스트를 진행할 때 JUnit에 내장된 실행자 외에 다른 실행자를 실행시킵니다.
  - 여기서 SpringRunner라는 스프링 실행자를 사용합니다.
  - 즉, 스프링 부트 테스트와 JUnit 사이에 연결자 역할을 합니다.

## 2.3 롬복 소개 및 설치하기
- 롬복은 자바 개발할 때 자주 사용하는 코드 Getter, Setter, 기본 생성자, toString 등을 어노테이션을 자동 생성해 줍니다.
- 프로젝트 생성할때마다 라이브러리 추가와 Enable annotation processing 설정을 해줘야 한다.

## 2.4 Hello Controller 코드를 롬복으로 전환하기
- 이미 진행된 프로젝트에 롬복을 적용시킬때 테스트 코드가 작성이 되어 있다면 안전성이 보장 된다.
- Junit과 비교하여 asserj의 장점
  - CoreMatchers와 달리 추가적을 라이브러리가 불필요하다.
  - 자동완성이 좀 더 확실하게 지원됩니다.

## 궁금한 점 스스로 찾아보기

### 1.DTO 필드에 final 불변성을 적용 가능할까??
- 가능하다. Jackson이 ObjectMapper로 처리하기 때문에.
- [@Reuqest Body에서는 Setter가 필요없다?](https://jojoldu.tistory.com/407)


### 2. 불변을 사용하는 이유????
- [Why Immutables Are the Better Objects and How to Implement Them](https://reflectoring.io/java-immutables/)


## 회고
- 불변성에 대해서 다시 한번 공부하게 된것 같다.
- DTO 처리시 Setter가 필요없다는 부분은 알고 있었지만 final을 통하여 불변객체로 만들어도 Jackson이 처리할 수 있다라는 사실을 새롭게 알게 되었다.