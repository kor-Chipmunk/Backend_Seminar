<p data-ke-size="size14"><span>* 본문은 &lt;스프링부트와 aws로 혼자 구현하는 웹서비스&gt;(2019, 이동욱, 프리렉)을 공부하고 정리한 내용입니다. 코드에서 import 부분은 모두 생략했습니다.</span></p>
<p>&nbsp;</p>
<p><span>그동안 조사 못했던 이것부터 알아보고 가자.</span></p>
<p>&nbsp;</p>
<blockquote style="font-size: 1.25em;" data-ke-size="size18" data-ke-style="style2"><b><span>import static ~ 이란?</span></b></blockquote>
<p><span>정적 메소드, 멤버 필드를 더 편하게 사용할 수 있는 방법이다.</span></p>
<p><span>정적 메소드는 호출할 때 클래스의 인스턴스 없이도 사용할 수 있는 메서드를 말한다.</span></p>
<p><span>이런 정적 메소드들을 import static ~ 선언문을 이용하면 클래스명 없이 바로 사용할 수 있다.</span></p>
<p><span>예시 코드를 보면 바로 이해할 수 있다.</span></p>
<p>출처:&nbsp;</p>
<p><a href="https://offbyone.tistory.com/283">https://offbyone.tistory.com/283</a></p>
<p><a href="https://xxxelppa.tistory.com/38">https://xxxelppa.tistory.com/38</a></p>
<div class="colorscripter-code" style="color: #010101; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position: relative !important; overflow: auto;" data-darkreader-inline-color="">
<table class="colorscripter-code-table" style="margin: 0; padding: 0; border: none; background-color: #fafafa; border-radius: 4px;" cellspacing="0" cellpadding="0" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="" data-darkreader-inline-bgcolor="">
<tbody>
<tr>
<td style="padding: 6px; border-right: 2px solid #e5e5e5;" data-darkreader-inline-border-right="">
<div style="margin: 0; padding: 0; word-break: normal; text-align: right; color: #666; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height: 130%;" data-darkreader-inline-color="">
<div style="line-height: 130%;">1</div>
<div style="line-height: 130%;">2</div>
<div style="line-height: 130%;">3</div>
<div style="line-height: 130%;">4</div>
<div style="line-height: 130%;">5</div>
<div style="line-height: 130%;">6</div>
<div style="line-height: 130%;">7</div>
</div>
</td>
<td style="padding: 6px 0; text-align: left;">
<div style="margin: 0; padding: 0; color: #010101; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height: 130%;" data-darkreader-inline-color="">
<div style="padding: 0 6px; white-space: pre; line-height: 130%;"><span style="color: #a71d5d;" data-darkreader-inline-color="">import</span>&nbsp;<span style="color: #a71d5d;" data-darkreader-inline-color="">static</span>&nbsp;java.lang.<span style="color: #066de2;" data-darkreader-inline-color="">System</span>.<span style="color: #0086b3;" data-darkreader-inline-color=""></span><span style="color: #a71d5d;" data-darkreader-inline-color="">*</span>;</div>
<div style="padding: 0 6px; white-space: pre; line-height: 130%;">&nbsp;</div>
<div style="padding: 0 6px; white-space: pre; line-height: 130%;"><span style="color: #a71d5d;" data-darkreader-inline-color="">public</span>&nbsp;<span style="color: #a71d5d;" data-darkreader-inline-color="">class</span>&nbsp;Example&nbsp;{</div>
<div style="padding: 0 6px; white-space: pre; line-height: 130%;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d;" data-darkreader-inline-color="">public</span>&nbsp;<span style="color: #a71d5d;" data-darkreader-inline-color="">static</span>&nbsp;<span style="color: #a71d5d;" data-darkreader-inline-color="">void</span>&nbsp;main(<span style="color: #066de2;" data-darkreader-inline-color="">String</span>[]&nbsp;ar)&nbsp;{</div>
<div style="padding: 0 6px; white-space: pre; line-height: 130%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #066de2;" data-darkreader-inline-color="">out</span>.<span style="color: #066de2;" data-darkreader-inline-color="">println</span>();</div>
<div style="padding: 0 6px; white-space: pre; line-height: 130%;">&nbsp;&nbsp;&nbsp;&nbsp;}</div>
<div style="padding: 0 6px; white-space: pre; line-height: 130%;">}</div>
</div>
<div style="text-align: right; margin-top: -13px; margin-right: 5px; font-size: 9px; font-style: italic;"><a style="color: #e5e5e5text-decoration:none;" href="http://colorscripter.com/info#e" target="_blank" rel="noopener">Colored by Color Scripter</a></div>
</td>
<td style="vertical-align: bottom; padding: 0 2px 4px 0;"><a style="text-decoration: none; color: white;" href="http://colorscripter.com/info#e" target="_blank" rel="noopener" data-darkreader-inline-color=""><span style="font-size: 9px; word-break: normal; background-color: #e5e5e5; color: white; border-radius: 10px; padding: 1px;" data-darkreader-inline-bgcolor="" data-darkreader-inline-color="">cs</span></a></td>
</tr>
</tbody>
</table>
</div>
<p><span>하지만 일반적으로 위 코드처럼 import 에 * 를 사용하는 것은 권장 되지 않는다.</span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p style="font-size: 1.25em;" data-ke-size="size18"><span style="background-color: #009a87;" data-darkreader-inline-bgcolor="">1. 기본 페이지 만들기</span></p>
<p><span>본 코드에선 할게 딱히 없어서 테스트 코드에 있던 것중 모르는 것 메모. URL 호출 시 페이지 내용이 제대로 호출되는지에 대한 테스트다.</span></p>
<p><span>html도 결국 규칙이 있는 문자열이라, TestRestTemplate을 통해 "/"로 호출했을 때 index.mustache 에 포함된 코드들이 있는지 확인하면 된다. 전체 코드를 다 검증할 필요는 없기 때문에 <span>"스프링 부트로 시작하는 웹 서비스"가 포함되어 있는지만 비교한다.</span></span></p>
<p><span><b><span>&bull;</span><span>TestRestTemplate 클래스의 getForObject 메서드</span></b></span></p>
<p><span><span>&nbsp; &nbsp;- Retrieve a representation by doing a GET on the URI template.</span></span></p>
<p><span><span>출처:</span></span></p>
<p><span><span><a href="https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/web/client/TestRestTemplate.html">https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/web/client/TestRestTemplate.html</a></span></span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p style="font-size: 1.25em;" data-ke-size="size18"><span style="background-color: #009a87;" data-darkreader-inline-bgcolor="">2. 게시글 등록 화면 만들기</span></p>
<p style="font-size: 1.12em;" data-ke-size="size16"><span style="background-color: #0593d3;" data-darkreader-inline-bgcolor="">1) 프론트엔드 라이브러리를 사용할 수 있는 방법</span></p>
<p><u><span>첫째, 외부 CDN(<b>Contents Delivery Network</b>) 사용</span></u></p>
<p data-ke-size="size14"><span>*CDN이란? <span>음원, 영상 등 10메가 이상의 대용량 파일을 병목 현상 없이 안정적으로 제공하는 기술. <span>네트워크 트래픽 자체를 줄여주는 기술. 더 자세한 내용은 아래 링크.&nbsp;</span></span></span></p>
<p data-ke-size="size14"><span><span><span><a href="https://goddaehee.tistory.com/173">https://goddaehee.tistory.com/173</a></span></span></span></p>
<p><span>*실제 서비스엔 외부 서비스에 자사 서비스가 의존하게 되기 때문에 이 방법을 잘 사용하지 않는다.</span></p>
<p><u><span>둘째, 직접 라이브러리를 받아서 사용.</span></u></p>
<p><span>여기선 전자의 방법 사용.</span></p>
<p><span>그리고 레이아웃 방식을 사용할건데, <u>레이아웃 방식</u>이란 공통 영역을 별도의 파일로 분리하여 필요한 곳에서 가져다 쓰는 방식.</span></p>
<p>&nbsp;</p>
<p style="font-size: 1.12em;" data-ke-size="size16"><span style="background-color: #0593d3;" data-darkreader-inline-bgcolor="">2) header, footer mustache</span></p>
<p><span>&bull;</span><u><span>페이지 로딩 속도를 높이기 위해 css는 header, js는 footer에 둠</span></u></p>
<p><span><span>&nbsp; &nbsp; &bull;</span><span>HTML은 head가 다 실행되고 나서 body가 실행됨-&gt;css는 화면을 그리는 역할이므로 head에서 불러오고, 이게 다 실행되고 나서 (무거워 질 수 있는) js를 body에서 불러오게 함</span></span></p>
<p><span>&nbsp; &nbsp; &bull;head가 다 불러지지 않으면 사용자 쪽에선 백지 화면만 노출됨</span></p>
<p><span><span>&nbsp; &nbsp; &bull;head 속 css가 다 불러지지 않으면 이게 적용되지 않은 깨진 화면 노출</span></span></p>
<p><span><span>&nbsp; &nbsp; &bull;js 용량이 클수록 body 실행이 늦어짐</span></span></p>
<p><span><span><span>&bull;bootstrap.js는 jQuery가 꼭 있어야만 함(부트스트랩의 제이쿼리 의존성)-&gt;<u>부트스트랩보다 제이쿼리가 먼저 호출되게 코드 작성</u></span></span></span></p>
<p><span><span>&bull;{{&gt; }}는&nbsp;</span>현재 머스테치 파일인 index.mustache 기준으로 다른 파일을 가져온다</span></p>
<p><span><span>&bull;&lt;a&gt;태그로 글 등록 페이지로 이동하는 글 등록 버튼 생성</span></span></p>
<p>&nbsp;</p>
<p>3) index.js</p>
<p>142~3의 스코프, var init어쩌고 하는 부분. 난 자스를 몰라서 나중에 한번 더 봐야할 내용.</p>
<p>&nbsp;</p>
<p>4) PostsRepository 인터페이스에 쿼리 추가</p>
<pre id="code_1585387537126" class="java" data-ke-language="java" data-ke-type="codeblock"><code>public interface PostsRepository extends JpaRepository&lt;Posts, Long&gt; {
    @Query("SELECT p FROM Posts p ORDER BY p.id DESC")
    List&lt;Posts&gt; findAllDesc();
}</code></pre>
<p>위 코드는 SpringDataJpa에서 제공하는 기본 메서드만으로도 해결 가능한데, 위처럼 @Query<span>로 작성해도 됨. 가독성은 @쿼리가 훨 좋다.</span><span></span></p>
<p data-ke-size="size14"><span>*Querydsl 추천에 대한 이야기는 147쪽, 시간관계상 메모 생략</span></p>
<p>&nbsp;</p>
<p>5) PostsListResponseDto 생성</p>
<p>&nbsp;</p>
<p>6) PostsService 에 findAllDesc() 메서드 추가</p>
<pre id="code_1585396838876" class="java" data-ke-language="java" data-ke-type="codeblock"><code>@Transactional(readOnly = true)
    public List&lt;PostsListResponseDto&gt; findAllDesc() {
        return postsRepository.findAllDesc().stream()
                .map(PostsListResponseDto::new)
                .collect(Collectors.toList());
    }</code></pre>
<p><span>&bull;</span>readOnly 옵션은 CRUD 기능이 전혀 없는 서비스 메서드에서 사용하면 좋다. 트랜잭션 범위는 유지하되 조회 기능만 남겨두어 조회속도가 개선된다. 문서 등을 '읽기 모드'할 떄를 생각해보면 상식적으로 이해 가능.</p>
<p><span>&bull;</span>.map(PostsListResponseDto::<span>new</span>) 은 .map(posts-&gt;new PostsListResponseDto(posts))와 동치(람다식)다. 왜 posts지..?</p>
<p><span>postsRepository 결과로 넘어온 posts의 stream을 맵을 통해 PostsListResponseDto 변환-&gt;Lists로 반환하는 메서드다.</span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span><span>[html 문법 검색해보기]</span></span></p>
<p><span><span>&lt;label for="~"&gt;: 사용자 인터페이스(UI) 요소의 라벨을 정의할 때 사용한다. for 속성을 통해 다른 요소와 결합할 수 있다. 그냥 봐선 이해 안되므로 아래 링크를 통해 예시 코드 및 실행 결과와 함께 이해할 것 </span></span></p>
<p><span><span><a href="http://tcpschool.com/html-tags/label">http://tcpschool.com/html-tags/label</a></span></span></p>
